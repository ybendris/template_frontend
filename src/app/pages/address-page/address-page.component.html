<form (ngSubmit)="onSubmit()" [formGroup]="addressForm" novalidate>
    <mat-card class="shipping-card">
        <mat-card-header>
            <mat-card-title>Shipping Information</mat-card-title>
        </mat-card-header>
        <mat-card-content>
            <div class="row">
                <div class="col">
                    <mat-form-field class="full-width">
                        <input formControlName="company" matInput placeholder="Company">
                    </mat-form-field>
                </div>
            </div>
            <div class="row">
                <div class="col">
                    <mat-form-field class="full-width">
                        <input formControlName="firstName" matInput placeholder="First name">
                        @if (addressForm.controls['firstName'].hasError('required')) {
                            <mat-error>First name is <strong>required</strong></mat-error>
                        }
                    </mat-form-field>
                </div>
                <div class="col">
                    <mat-form-field class="full-width">
                        <input formControlName="lastName" matInput placeholder="Last name">
                        @if (addressForm.controls['lastName'].hasError('required')) {
                            <mat-error>Last name is <strong>required</strong></mat-error>
                        }
                    </mat-form-field>
                </div>
            </div>
            <div class="row">
                <div class="col">
                    <mat-form-field class="full-width">
                        <textarea formControlName="address" matInput placeholder="Address"></textarea>
                        @if (addressForm.controls['address'].hasError('required')) {
                            <mat-error>Address is <strong>required</strong></mat-error>
                        }
                    </mat-form-field>
                </div>
            </div>
            <div class="row">
                <div class="col">
                    @if (hasUnitNumber) {
                        <mat-form-field class="full-width">
                            <textarea matInput placeholder="Address 2" formControlName="address2"></textarea>
                        </mat-form-field>
                    } @else {
                        <button mat-button type="button" (click)="hasUnitNumber = !hasUnitNumber">
                            + Add C/O, Apt, Suite, Unit
                        </button>
                    }
                </div>
            </div>
            <div class="row">
                <div class="col">
                    <mat-form-field class="full-width">
                        <input formControlName="city" matInput placeholder="City">
                        @if (addressForm.controls['city'].hasError('required')) {
                            <mat-error>City is <strong>required</strong></mat-error>
                        }
                    </mat-form-field>
                </div>
                <div class="col">
                    <mat-form-field class="full-width">
                        <mat-select formControlName="state" placeholder="State">
                            @for (state of states;track state) {
                                <mat-option [value]="state.abbreviation">{{ state.name }}</mat-option>
                            }
                        </mat-select>
                        @if (addressForm.controls['state'].hasError('required')) {
                            <mat-error>State is <strong>required</strong></mat-error>
                        }
                    </mat-form-field>
                </div>
            </div>
            <div class="row">
                <div class="col">
                    <mat-form-field class="full-width">
                        <input #postalCode formControlName="postalCode" matInput maxlength="5" placeholder="Postal Code"
                               type="number">
                        <mat-hint align="end">{{ postalCode.value.length }} / 5</mat-hint>
                    </mat-form-field>
                </div>
            </div>
            <div class="row">
                <div class="col">
                    <mat-radio-group formControlName="shipping">
                        <mat-radio-button value="free">Free Shipping</mat-radio-button>
                        <mat-radio-button value="priority">Priority Shipping</mat-radio-button>
                        <mat-radio-button value="nextday">Next Day Shipping</mat-radio-button>
                    </mat-radio-group>
                </div>
            </div>
            <div class="row">
                <div class="col">
                    <mat-slide-toggle>TEST COULEUR</mat-slide-toggle>
                </div>
            </div>
        </mat-card-content>
        <mat-card-actions>
            <button color="primary" mat-raised-button type="submit">Submit</button>
        </mat-card-actions>
    </mat-card>
</form>
